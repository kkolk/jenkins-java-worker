- name: Install Jenkins Java Worker Node
  hosts: java-worker
  connection: ssh
  become: true

  roles:
    - role: java

    - role: maven
      maven_version: '3.6.0'

  tasks:
    - name: Install additional requirements
      package:
        name:
          - ant
          - zip
          - unzip
          - bzip2
          - git
        state: present

    - name: Read credentials id for Jenkins Worker
      xml:
        path: "{{ jenkins_master_home }}/credentials.xml"
      register: jenkins_credentials
      delegate_to: localhost
      run_once: true
      become: false
    
    - name: Debug 
      debug:
        var: jenkins_credentials
        verbosity: 4
