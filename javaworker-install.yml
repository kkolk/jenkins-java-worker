- name: Install Jenkins Java Worker Node
  hosts: java-worker
  connection: ssh
  become: true

  roles:
    - role: java

    - role: maven
      maven_version: '3.6.0'

  tasks:
    - name: Install additional requirements
      package:
        name:
          - ant
          - zip
          - unzip
          - bzip2
          - git
        state: present

    - name: Read credentials id for Jenkins Worker
      jenkins_script:
        script: 'println(Jenkins.instance.pluginManager.plugins)'
        url: "{{ jenkins_master }}"
        user: jenkins
        password: jenkins
        validate_certs: no
      register: jenkins_credentials
